<!DOCTYPE HTML>
<!--
	Visualize by TEMPLATED
	templated.co @templatedco
	Released for free under the Creative Commons Attribution 3.0 license (templated.co/license)
-->
<html>
	<head>
		<title>Happy Birthday</title>
		<meta charset="utf-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1" />
		<link rel="stylesheet" href="assets/css/main.css" />
	</head>
	<body>

		<!-- Wrapper -->
			<div id="wrapper">

				<!-- Header -->
					<header id="header">
						<span class="avatar"><img src="images/avatar1.jpeg" alt="" /></span>
						<h1 style="font-family: cursive;font-variant-caps: normal;">A Memory for Wang Xiao</h1>
						<!-- <ul class="icons">
							<li><a href="#" class="icon style2 fa-twitter"><span class="label">Twitter</span></a></li>
							<li><a href="#" class="icon style2 fa-facebook"><span class="label">Facebook</span></a></li>
							<li><a href="#" class="icon style2 fa-instagram"><span class="label">Instagram</span></a></li>
							<li><a href="#" class="icon style2 fa-500px"><span class="label">500px</span></a></li>
							<li><a href="#" class="icon style2 fa-envelope-o"><span class="label">Email</span></a></li>
						</ul> -->
					</header>

				<!-- Main -->
					<section id="main">

						<!-- Thumbnails -->
							<section class="thumbnails">
								<div id="div1">
									<a>
                                        <img src="https://2-1300539574.cos.ap-chengdu.myqcloud.com/wx/IMG_1599.JPG" alt="" class="pimg"/>
                                        <h5 style="margin-top: 0.9em;">梵高 · 星空夜。</h5>
                                    </a>
                                    <a>
                                        <img src="https://2-1300539574.cos.ap-chengdu.myqcloud.com/wx/IMG_20190225_221545.jpg" alt="" class="pimg"/>
                                        <h5 style="margin-top: 0.9em;">Don't draw outside of the frame.</h5>
                                    </a>
								</div>
								<div id="div2">
									<a>
                                        <img src="https://2-1300539574.cos.ap-chengdu.myqcloud.com/wx/IMG_1593.JPG" alt="" class="pimg"/>
                                        <h5 style="margin-top: 0.9em;">实际上我们穿越大地，我们只是经历生活。</h5>
                                    </a>
                                    <a>
                                        <img src="https://2-1300539574.cos.ap-chengdu.myqcloud.com/wx/IMG_20190310_162014.jpg" alt="" class="pimg"/>
                                        <h5 style="margin-top: 0.9em;">Art is for everybody.</h5>
                                    </a>
								</div>
								<div id="div3">
									<a>
                                        <img src="https://2-1300539574.cos.ap-chengdu.myqcloud.com/wx/IMG_20190221_143013.jpg" alt="" class="pimg"/>
                                        <h5 style="margin-top: 0.9em;">人，诗意地栖居。</h5>
                                    </a>
                                    <a>
                                        <img src="https://2-1300539574.cos.ap-chengdu.myqcloud.com/wx/IMG_20190322_150642.jpg" alt="" class="pimg"/>
                                        <h5 style="margin-top: 0.9em;">诗和远方的田野。</h5>
                                    </a>
                                   
                                    
                                    
								</div>
							</section>

                    </section>
                    

                    <div id="outerdiv" style="position:fixed;top:0;left:0;background:rgba(33,33,33,0.92);filter:alpha(opacity=75);z-index:2;width:100%;height:100%;display:none;">
                        <div id="innerdiv" style="position:absolute;">
                            <img id="bigimg" style="width: 100%; border-radius:6px" src="" />
                        </div>
                    </div>

				<!-- Footer -->
					<footer id="footer">
						<p onclick="btnclick()">&copy;  All rights reserved by WX.</p>
					</footer>

			</div>

		<!-- Scripts -->
			<script src="https://2-1300539574.cos.ap-chengdu.myqcloud.com/assets/js/jquery.min.js"></script>
            <script src="https://2-1300539574.cos.ap-chengdu.myqcloud.com/assets/js/jquery.poptrox.min.js"></script>
            <!-- <script src="https://cdn.bootcss.com/jquery.poptrox/2.5.1/jquery.poptrox.js"></script> -->
			<script src="https://2-1300539574.cos.ap-chengdu.myqcloud.com/assets/js/skel.min.js"></script>
            
           
			

			<!-- my own js -->
            <script src="https://2-1300539574.cos.ap-chengdu.myqcloud.com/utils/wx.js"></script>
            
            <script src="https://2-1300539574.cos.ap-chengdu.myqcloud.com/assets/js/jquery.foggy.min.js"></script>
		
			<!-- <script type='text/javascript' src='https://2-1300539574.cos.ap-chengdu.myqcloud.com/js/jquery.js'></script> -->
			<script type="text/javascript">
            // alert(data[3]['url']);
            



            $(function(){
                $(".pimg").click(function(){
                    var _this = $(this);//将当前的pimg元素作为_this传入函数
                    // $("#main").foggy({blurRadius: 4, opacity: 0.8,  cssFilterSupport: true });
                    imgShow("#outerdiv", "#innerdiv", "#bigimg", _this);
                    
                    // $("#main").foggy({blurRadius: 6, opacity: 0.7,  cssFilterSupport: true });
                });

            });
            
            function imgShow(outerdiv, innerdiv, bigimg, _this){
                var src = _this.attr("src");//获取当前点击的pimg元素中的src属性
                $(bigimg).attr("src", src);//设置#bigimg元素的src属性
                /*获取当前点击图片的真实大小，并显示弹出层及大图*/
                $("<img/>").attr("src", src).load(function(){
                    var windowW = $(window).width();//获取当前窗口宽度
                    var windowH = $(window).height();//获取当前窗口高度
                    var realWidth = this.width;//获取图片真实宽度
                    var realHeight = this.height;//获取图片真实高度
                    var imgWidth, imgHeight;
                    var scale = 0.75;//缩放尺寸，当图片真实宽度和高度大于窗口宽度和高度时进行缩放
                    if(realHeight>windowH*scale) {//判断图片高度
                        imgHeight = windowH*scale;//如大于窗口高度，图片高度进行缩放
                        imgWidth = imgHeight/realHeight*realWidth;//等比例缩放宽度
                        if(imgWidth>windowW*scale) {//如宽度扔大于窗口宽度
                            imgWidth = windowW*scale;//再对宽度进行缩放
                        }
                    } else if(realWidth>windowW*scale) {//如图片高度合适，判断图片宽度
                        imgWidth = windowW*scale;//如大于窗口宽度，图片宽度进行缩放
                        imgHeight = imgWidth/realWidth*realHeight;//等比例缩放高度   
                    } else {//如果图片真实高度和宽度都符合要求，高宽不变
                        imgWidth = realWidth;
                        imgHeight = realHeight;
                    }
            
                    $(bigimg).css("width",imgWidth);//以最终的宽度对图片缩放
                    var w = (windowW-imgWidth)/2;//计算图片与窗口左边距
                    var h = (windowH-imgHeight)/2;//计算图片与窗口上边距
                    $(innerdiv).css({"top":h, "left":w});//设置#innerdiv的top和left属性
                    $(outerdiv).fadeIn("slow");//淡入显示#outerdiv及.pimg
                    $("#main").foggy({blurRadius: 4, opacity: 0.8,  cssFilterSupport: true });
                });
            
                $(outerdiv).click(function(){//再次点击淡出消失弹出层
                    $(this).fadeOut("fast","swing");
                    $("#main").foggy(false);
                });
            
            }
            



			function getElementTop(element){
		　　　　var actualTop = element.offsetTop;
		　　　　var current = element.offsetParent;
		　　　　while (current !== null){
		　　　　　　actualTop += (current.offsetTop+current.clientTop);
		　　　　　　current = current.offsetParent;
		　　　　}
		　　　　return actualTop;
        　　}
            

            function getLowestDiv(last){
                var obj1 = document.getElementById("div1");
                var b1 = obj1.lastElementChild;
                var h1 = getElementTop(b1);

                var obj2 = document.getElementById("div2");
                var b2 = obj2.lastElementChild;
                var h2 = getElementTop(b2);

                var obj3 = document.getElementById("div3");
                var b3 = obj3.lastElementChild;
                var h3 = getElementTop(b3);

                if(h1 <= h2 && h1<=h3 && last!=1) return 1;
                if(h2 < h1 && h2<h1 && last!=2) return 2;
                if(h3 < h1 && h3<h1 && last!=3) return 3;
                else return 1;
            }

            var totalcnt = data.length;
            var nowcnt = 0;
            // var cnt1=0, cnt2=0, cnt3=0;
            // var pos1=0, pos2=0, pos3=0;
            var preurl = "https://2-1300539574.cos.ap-chengdu.myqcloud.com/wx/"
              
            function loadPics(num){
                for(var j=0; j<num; j++){
                    // sleep(500);
                    var last = -1;
                    if(nowcnt < totalcnt){
                        var s = "<a>\n" +
                "                                        <img src=\""+ preurl+ data[nowcnt]['url'] +"\" alt=\"\" class=\"pimg\"/>\n" +
                "                                        <h5 style=\"margin-top: 0.9em;\">"+ data[nowcnt]['notes']+ "</h5>\n" +
                "                                    </a>";

                        var i = getLowestDiv(last);
                        last = i;
                        if(i==1){
                            var obj = document.getElementById("div1");
                            $("#div1").append(s);
                        }
                        else if(i==2){
                            var obj = document.getElementById("div2");
                            $("#div2").append(s);
                        }else{
                            var obj = document.getElementById("div3");
                            $("#div3").append(s);
                        }
                        nowcnt += 1;
                    }
                   
                }

                $(".pimg").click(function(){
                    var _this = $(this);//将当前的pimg元素作为_this传入函数
                    imgShow("#outerdiv", "#innerdiv", "#bigimg", _this);
                });   
            }
            function sleep(n){
                var start = new Date().getTime();
                while(true){
                    if(new Date().getTime() - start > n) break;
                }
            }
			$(document).ready(function(){
				$(window).scroll(function(){
                    if($(document).scrollTop()>=$(document).height()-$(window).height()){
                        // alert("jjj");
                        // for(var j=0; j<2;j++){
                            loadPics(6);
                            sleep(500);
                        // }
                    }
				})
			})

            function btnclick(){
                // for(var j=0; j<3;j++){
                    loadPics(3);
                    sleep(700);
                // }
                
            }
            </script>
            
            <!-- <script src="assets/js/main.js"></script> -->
            <script src="assets/js/picpopup.js"></script>

	</body>
</html>